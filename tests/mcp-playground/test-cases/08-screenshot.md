# 截图功能测试

测试 Browsion MCP 的屏幕截图功能。

## 前置条件

- Browsion Tauri 应用正在运行
- Claude Code 已连接到 MCP 服务器
- test-profile 已启动浏览器

## 测试用例

### 1. 全页面截图

**在 Claude Code 中执行：**

```
请导航到 https://example.com，
然后对整个页面进行截图，
保存为 PNG 格式。
```

**预期结果：**
- 返回 PNG 格式的截图（base64）
- 截图包含整个页面

**验证点：**
- ✅ 返回有效的 base64 PNG 数据
- ✅ 截图质量良好

**手动验证：**
- 将 base64 数据解码为图片文件
- 检查截图内容

---

### 2. 元素截图

**在 Claude Code 中执行：**

```
请截取页面的 h1 元素，
保存为 PNG 格式。
```

**预期结果：**
- 返回指定元素的截图
- 只截取该元素的区域

**验证点：**
- ✅ 截图只包含目标元素
- ✅ 元素边界正确

---

### 3. 截图选项测试

**在 Claude Code 中执行：**

```
请对当前页面进行截图，
这次使用 JPEG 格式，质量设为 90。
```

**预期结果：**
- 返回 JPEG 格式截图
- 质量设置为 90

**验证点：**
- ✅ 返回 JPEG 格式
- ✅ 文件大小合理

---

### 4. 全页面截图（包含滚动区域）

**在 Claude Code 中执行：**

```
请创建一个长页面（内容超出视口），
然后进行全页面截图，包含所有滚动内容。
```

**预期结果：**
- 截图包含完整的页面内容
- 包括视口外的内容

**验证点：**
- ✅ 长页面完全捕获
- ✅ 无内容丢失

---

## 测试总结

本场景测试截图功能：
- ✅ screenshot - 全页面截图
- ✅ screenshot_element - 元素截图
- ✅ 截图格式支持（PNG/JPEG）
- ✅ 质量参数控制
- ✅ 全页面模式（captureBeyondViewport）

**截图数据格式：**
- 返回 base64 编码的图片数据
- PNG：无损压缩，文件较大
- JPEG：有损压缩，文件较小
- 可保存到文件：`echo $base64_data | base64 -d > screenshot.png`

**代理影响：**
- 截图功能不受代理影响
- 完全在本地浏览器中执行
